(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{133:function(e,t,a){e.exports=a(148)},138:function(e,t,a){},143:function(e,t,a){},148:function(e,t,a){"use strict";a.r(t);var n=a(7),o=a.n(n),r=a(122),l=a.n(r),s=a(93),i=a(32),c=(a(138),a(78)),d=a(44),p=a(45),m=a(57),u=a(58),h=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).getSelectedElement=function(){var e,t,a=Object(c.a)(document.getElementById("result-list").children);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(n.classList.contains("selected")){e=n;break}}}catch(o){a.e(o)}finally{a.f()}return{cityName:e.dataset.cityName,coordinates:{lat:e.dataset.coordinatesLat,long:e.dataset.coordinatesLong}}},n.onChange=function(e){var t=e.currentTarget.value;fetch("https://nodejs-295719.ew.r.appspot.com/city?"+t).then((function(e){return e.json()})).then((function(e){var a=[],o=[],r=[];e.results.forEach((function(e){"street-square"!==e.category&&(a.push(e.title),o.push(e.distance),r.push(e.position))})),n.setState({selected:-1,suggestions:a,show:!0,input:t,coordinates:r,showSuggestions:!0})}))},n.overlay=function(e){n.setState((function(t){return{overlay:e,showSuggestions:e}}))},n.onClick=function(e,t,a,o){null!==document.getElementById("loader-overlay")&&(document.getElementById("loader-overlay").style.display="block"),setTimeout((function(){n.setState((function(e){return{overlay:!1,suggestions:[],showSuggestions:!1}})),n.props.history.push("/Weather/"+t+"&"+a+"&"+o),document.getElementById("inputSearch").value=""}),250)},n.onKeyDown=function(e){40!==e.keyCode&&38!==e.keyCode&&e.keyCode},n.scrollToSelected=function(e){document.getElementById(e).childNodes.forEach((function(e){e.classList.contains("selected")&&!n.isInViewport(e)&&e.scrollIntoView(!0)}))},n.isInViewport=function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)},n.state={suggestions:[],coordinates:[],show:!1,showSuggestions:!0,input:"",selectedCoordinates:null,overlay:!1},n}return Object(p.a)(a,[{key:"componentDidUpdate",value:function(){this.scrollToSelected("result-list")}},{key:"render",value:function(){var e=this,t=[];return!0===this.state.showSuggestions&&this.state.suggestions.forEach((function(a,n){t.push(o.a.createElement("li",{"data-coordinates-lat":e.state.coordinates[n][0],"data-coordinates-long":e.state.coordinates[n][1],className:a===e.state.input?"list-group-item selected":"list-group-item",onClick:function(t){return e.onClick(t,a,e.state.coordinates[n][0],e.state.coordinates[n][1])},key:a+n},a))})),o.a.createElement(n.Fragment,null,o.a.createElement("div",{className:"small"!==this.props.size?"input-group z-2":"input-group input-group-sm z-2"},o.a.createElement("div",{className:"input-group-prepend"},o.a.createElement("span",{className:"input-group-text rounded-0",id:"basic-addon1"},o.a.createElement("i",{className:"fas fa-search fa-xs"}))),o.a.createElement("input",{id:"inputSearch",className:"form-control rounded-0",type:"text",placeholder:"City","aria-label":"City",onClick:function(){e.overlay(!0)},onChange:this.onChange,onKeyDown:this.onKeyDown})),o.a.createElement("div",{className:"small"!==this.props.size?"":"dir-ltr mt-1"},o.a.createElement("ul",{id:"result-list",className:"small"!==this.props.size?"list-group rounded-0 position-absolute z-2":"list-group rounded-0 position-absolute z-2 small"},t)),o.a.createElement("div",{id:"overlay",className:!0===this.state.overlay?"overlay d-block z-1":"overlay d-none",onClick:function(){e.overlay(!1)}}))}}]),a}(n.Component),y=Object(i.f)(h);a(143);var g=function(){return o.a.createElement(n.Fragment,null,o.a.createElement("div",{className:"bg-image"}),o.a.createElement("div",{className:"container h-100"},o.a.createElement("div",{className:"row align-items-center h-90"},o.a.createElement("div",{className:"col-10 mx-auto"},o.a.createElement("p",{className:"h2 text-center text-white"},o.a.createElement("strong",null,"Check how the weather looks like",o.a.createElement("br",null),"in the rest of the world")),o.a.createElement("p",{className:"lead text-center text-white mb-5"},"This is a collection of data about temperatures and precipitations, that has been",o.a.createElement("br",null),"recorded in the last 30 years, around the world."),o.a.createElement(y,null)))))},v=a(90),f=a.n(v),E=null,b=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"componentDidMount",value:function(){Object.keys(this.props.data).length>0&&this.createGraph()}},{key:"componentDidUpdate",value:function(){Object.keys(this.props.data).length>0&&this.createGraph()}},{key:"createGraph",value:function(){null!==E&&E.destroy(),f.a.defaults.global.legend.display=!1,E=new f.a(document.getElementById(this.props.id),{type:"bar",data:{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Average precipitation",borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)",data:[this.props.data.data[0][this.props.id],this.props.data.data[1][this.props.id],this.props.data.data[2][this.props.id],this.props.data.data[3][this.props.id],this.props.data.data[4][this.props.id],this.props.data.data[5][this.props.id],this.props.data.data[6][this.props.id],this.props.data.data[7][this.props.id],this.props.data.data[8][this.props.id],this.props.data.data[9][this.props.id],this.props.data.data[10][this.props.id],this.props.data.data[11][this.props.id]]}]},options:{layout:{padding:{left:-5}},scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})}},{key:"render",value:function(){return o.a.createElement(n.Fragment,null,o.a.createElement("canvas",{id:this.props.id}))}}]),a}(n.Component),N=null,k=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={selectedTemperature:"tavg",gradient:["rgba(250,174,50,1)","rgba(250,174,50,0)"],gradientLinearity:[0,0,0,150]},n}return Object(p.a)(a,[{key:"updateSelection",value:function(e,t,a){this.setState((function(n){return{selectedTemperature:e,gradient:t,gradientLinearity:a}}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"card rounded-0"},o.a.createElement("div",{className:"card-body"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-5"},o.a.createElement("h5",{className:"card-title"},"Yearly Temperature")),o.a.createElement("div",{className:"col-7"},o.a.createElement("ul",{className:"nav nav-pills card-header-pills float-right mr-3"},o.a.createElement("li",{className:"nav-item"},o.a.createElement("button",{type:"button",className:"btn btn-light",onClick:function(){e.updateSelection("tavg",["rgba(250,174,50,1)","rgba(250,174,50,0)"],[0,0,0,150])}},"Avg")),o.a.createElement("li",{className:"nav-item mx-1"},o.a.createElement("button",{type:"button",className:"btn btn-light",onClick:function(){e.updateSelection("tmax",["rgba(249,107,46,1)","rgba(250,174,50,0.45)"],[0,0,0,150])}},"Max")),o.a.createElement("li",{className:"nav-item"},o.a.createElement("button",{type:"button",className:"btn btn-light",onClick:function(){e.updateSelection("tmin",["rgba(50,178,250,1)","rgba(185,46,249,0.1)"],[0,0,0,300])}},"Min"))))),o.a.createElement("div",null,o.a.createElement(w,{id:this.state.selectedTemperature,data:this.props.data,gradient:this.state.gradient,gradientLinearity:this.state.gradientLinearity}))))}}]),a}(n.Component),w=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={type:n.props.type,id:n.props.id},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){Object.keys(this.props.data).length>0&&this.createGraph()}},{key:"componentDidUpdate",value:function(){Object.keys(this.props.data).length>0&&this.createGraph()}},{key:"isCanvasBlank",value:function(e){return!e.getContext("2d").getImageData(0,0,e.width,e.height).data.some((function(e){return 0!==e}))}},{key:"createGraph",value:function(){null!==N&&N.destroy(),f.a.defaults.global.legend.display=!1;var e=document.getElementById(this.props.id),t=e.getContext("2d").createLinearGradient(this.props.gradientLinearity[0],this.props.gradientLinearity[1],this.props.gradientLinearity[2],this.props.gradientLinearity[3]);t.addColorStop(0,this.props.gradient[0]),t.addColorStop(1,this.props.gradient[1]),N=new f.a(e,{type:"line",data:{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Average Temperature",fillColor:t,strokeColor:"#ff6c23",pointColor:"#fff",pointStrokeColor:"#ff6c23",pointHighlightFill:"#fff",pointHighlightStroke:"#ff6c23",backgroundColor:t,data:[this.props.data.data[0][this.props.id],this.props.data.data[1][this.props.id],this.props.data.data[2][this.props.id],this.props.data.data[3][this.props.id],this.props.data.data[4][this.props.id],this.props.data.data[5][this.props.id],this.props.data.data[6][this.props.id],this.props.data.data[7][this.props.id],this.props.data.data[8][this.props.id],this.props.data.data[9][this.props.id],this.props.data.data[10][this.props.id],this.props.data.data[11][this.props.id]],fill:"start"}]},options:{scales:{yAxes:[{ticks:{display:!0},gridLines:{drawBorder:!1}}],xAxes:[{gridLines:{drawBorder:!1}}]},layout:{padding:{left:-5}}}})}},{key:"render",value:function(){return o.a.createElement(n.Fragment,null,o.a.createElement("canvas",{id:this.props.id,className:"temperatureChart"}))}}]),a}(n.Component),C=k,j=a(73),I=a(96),O=a(128),x=a(129),S=a(130),B=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.createMap()}},{key:"componentDidUpdate",value:function(){this.createMap()}},{key:"createMap",value:function(){j.e(x.a),j.e(S.a);var e=j.c("worldMap",I.a);e.geodata=O.a,e.projection=new I.d.Miller,e.homeZoomLevel=3,e.homeGeoPoint={longitude:parseInt(document.location.pathname.replace("/","").split("&")[2]),latitude:parseInt(document.location.pathname.replace("/","").split("&")[1])};var t=e.series.push(new I.c);t.useGeodata=!0;var a=t.mapPolygons.template;a.tooltipText="{name}",a.polygon.fillOpacity=.6,a.states.create("hover").properties.fill=e.colors.getIndex(0);var n=e.series.push(new I.b);n.mapImages.template.propertyFields.longitude="longitude",n.mapImages.template.propertyFields.latitude="latitude",n.mapImages.template.tooltipText="{title}",n.mapImages.template.propertyFields.url="url";var o=n.mapImages.template.createChild(j.a);o.radius=1,o.propertyFields.fill="color";var r=n.mapImages.template.createChild(j.a);r.radius=1,r.propertyFields.fill="color",r.events.on("inited",(function(e){!function e(t){t.animate([{property:"scale",from:1,to:5},{property:"opacity",from:1,to:0}],1e3,j.d.circleOut).events.on("animationended",(function(t){e(t.target.object)}))}(e.target)}));var l=new j.b;n.data=[{title:decodeURIComponent(document.location.pathname.replace("/Weather/","").split("&")[0]),latitude:parseInt(document.location.pathname.replace("/","").split("&")[1]),longitude:parseInt(document.location.pathname.replace("/","").split("&")[2]),color:l.next()}],document.querySelectorAll("[aria-labelledby]")[0].style.display="none"}},{key:"render",value:function(){return o.a.createElement(n.Fragment,null,o.a.createElement("div",{id:"worldMap",className:"h-90"}))}}]),a}(n.Component),M=Object(i.f)(B),L=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={response:{},selectedTemperature:"tavg",city:decodeURIComponent(document.location.pathname.replace("/Weather/","").split("&")[0])},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=document.location.pathname.replace("/","").split("&")[1],a=document.location.pathname.replace("/","").split("&")[2];null!==document.getElementById("loader-overlay")&&(document.getElementById("loader-overlay").style.display="block"),fetch("https://nodejs-295719.ew.r.appspot.com/stats?lat="+t+"&long="+a).then((function(e){return e.json()})).then((function(t){e.setState((function(e){return{response:t,city:decodeURIComponent(document.location.pathname.replace("/Weather/","").split("&")[0])}})),null!==document.getElementById("loader-overlay")&&(document.getElementById("loader-overlay").style.display="none")}))}},{key:"componentDidUpdate",value:function(){var e=this;if(this.state.city!==decodeURIComponent(document.location.pathname.replace("/Weather/","").split("&")[0])){var t=document.location.pathname.replace("/","").split("&")[1],a=document.location.pathname.replace("/","").split("&")[2];null!==document.getElementById("loader-overlay")&&(document.getElementById("loader-overlay").style.display="block"),fetch("https://nodejs-295719.ew.r.appspot.com/stats?lat="+t+"&long="+a).then((function(e){return e.json()})).then((function(t){e.setState((function(e){return{response:t,city:decodeURIComponent(document.location.pathname.replace("/Weather/","").split("&")[0])}})),null!==document.getElementById("loader-overlay")&&(document.getElementById("loader-overlay").style.display="none")}))}}},{key:"render",value:function(){var e=this;return o.a.createElement(n.Fragment,null,o.a.createElement("div",{id:"loader-overlay",className:"loader-overlay z-3"},o.a.createElement("div",{id:"loader",className:"loader"})),o.a.createElement("div",{className:"container-fluid h-100"},o.a.createElement("div",{className:"row header h-60p"},o.a.createElement("div",{className:"col-4 my-auto ml-auto text-muted"},o.a.createElement("h3",null,o.a.createElement("div",{className:"homeButton",onClick:function(){e.props.history.push("/Weather/")}},"Home"))),o.a.createElement("div",{className:"col-6 my-auto mr-auto"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-6"}),o.a.createElement("div",{className:"col-6"},o.a.createElement(y,{size:"small"}))))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-10 mx-auto"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-xl-4 mt-2"},o.a.createElement("div",{className:"card rounded-0 h-100"},o.a.createElement("div",{className:"card-body"},o.a.createElement("h5",{className:"card-title"},decodeURIComponent(document.location.pathname.replace("/Weather/","").split("&")[0])),o.a.createElement(M,null)))),o.a.createElement("div",{className:"col-xl-8 mt-2"},o.a.createElement(C,{data:this.state.response}))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-xl-4 mt-2 mr-auto"},o.a.createElement("div",{className:"card rounded-0"},o.a.createElement("div",{className:"card-body"},o.a.createElement("h5",{className:"card-title"},"Yearly precipitation"),o.a.createElement("p",{className:"card-text"},o.a.createElement(b,{id:"prcp",data:this.state.response}))))))))))}}]),a}(n.Component),D=Object(i.f)(L);l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(s.a,null,o.a.createElement(i.c,null,o.a.createElement(i.a,{exact:!0,strict:!0,path:"/Weather/(.*.{1,})"},o.a.createElement(D,{city:decodeURIComponent(document.location.pathname.replace("/Weather/","").split("&")[0])})),o.a.createElement(i.a,null,o.a.createElement(g,null))))),document.getElementById("root"))}},[[133,1,4]]]);
//# sourceMappingURL=main.0274398a.chunk.js.map